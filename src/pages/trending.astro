---
const apiUrl = "https://navigatingadolescenceonline.wordpress.com/wp-json/wp/v2/posts?per_page=3";

let posts = [];

try {
  const response = await fetch(apiUrl);
  if (response.ok) {
    posts = await response.json();
  } else {
    console.error("Failed to fetch posts:", response.statusText);
  }
} catch (error) {
  console.error("Error fetching WordPress posts:", error);
}
---

<section class="max-w-4xl mx-auto p-4">
  <h2 class="text-3xl font-semibold text-center mb-6">Trending Blog Posts</h2>
  
  {posts.length > 0 ? (
    <ul class="space-y-6">
      {posts.map(post => (
        <li class="border-b pb-4">
          <h3 class="text-xl font-bold">
            <a href={post.link} class="text-blue-600 hover:underline" set:html={post.title.rendered}></a>
          </h3>
          <p class="text-gray-600" set:html={post.excerpt.rendered}></p>
          <a href={post.link} class="text-blue-500 hover:underline">Read More â†’</a>
        </li>
      ))}
    </ul>
  ) : (
    <p class="text-center text-gray-500">No trending posts available.</p>
  )}
</section>
